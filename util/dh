

DASD DUMP RESTORE (DDR)

THE DASD DUMP RESTORE (DDR) PROGRAM IS USED TO DUMP, RESTORE, COPY
OR PRINT USER MINIDISKS. THE DDR PROGRAM MAY RUN AS A STAND-ALONE
PROGRAM OR UNDER CMS VIA THE DDR  COMMAND.

THE DDR PROGRAM FUNCTIONS ARE:

1.  DUMPS PART OR ALL OF THE DATA  FROM A DASD DEVICE TO TAPE.

2.  TRANSFERS DATA FROM TAPES CREATED BY THE DDR DUMP FUNCTION 
    TO A DIRECT ACCESS DEVICE.  THE DIRECT ACCESS DEVICE MUST BE OF THE 
    SAME TYPE AS THAT WHICH ORIGINALLY CONTAINED THE DATA.

3.  COPIES DATA FROM ONE DEVICE TO ANOTHER OF THE SAME TYPE.  DATA
    MAY BE REORDERED BY CYLINDER (OR BLOCK) WHEN COPIED
    FROM DISK TO DISK.  IN ORDER TO COPY ONE TAPE TO ANOTHER, THE
    ORIGINAL TAPE MUST HAVE BEEN CREATED BY THE DDR
    DUMP PROGRAM.

4.  PRINTS SELECTED PARTS OF DASD, TAPE RECORDS AND PAGING
    STORAGE IN HEXADECIMAL AND EBCDIC ON THE VIRTUAL PRINTER.





DUMP
REQUESTS THE PROGRAM TO MOVE DATA FROM A DIRECT ACCESS
VOLUME ONTO A MAGNETIC TAPE OR TAPES.

THE DATA IS MOVED CYLINDER BY CYLINDER.  ANY NUMBER OF
CYLINDERS MAY BE MOVED.

THIS OPERAND REQUESTS THE PROGRAM TO MOVE DATA FROM
A DIRECT ACCESS VOLUME ONTO A MAGNETIC TAPE OR TAPES, AND THE FORMAT
OF THE TAPE DEPENDS ON THE TYPE OF THE DIRECT ACCESS VOLUME.

COPY
REQUESTS THE PROGRAM TO COPY DATA FROM ONE DEVICE TO ANOTHER
DEVICE OF THE SAME OR EQUIVALENT TYPE.  DATA MAY BE RECORDED
ON A CYLINDER OR BLOCK BASIS FROM INPUT DEVICE TO OUTPUT
DEVICE. A TAPE-TO-TAPE COPY CAN BE ACCOMPLISHED ONLY
WITH DATA DUMPED BY THE PROGRAM.

RESTORE
REQUESTS THE PROGRAM TO RETURN DATA THAT HAS BEEN DUMPED BY THIS
PROGRAM.  DATA CAN BE RESTORED ONLY TO A DASD VOLUME OF THE
SAME OR EQUIVALENT DEVICE TYPE FROM WHICH IT WAS DUMPED. IT IS
POSSIBLE TO DUMP FROM A REAL DISK AND RESTORE TO A MINIDISK
AS LONG AS THE DEVICE TYPES ARE THE SAME.


TO USE DDR AS A STAND-ALONE PROGRAM, THE OPERATOR SHOULD IPL IT FROM
A REAL OR VIRTURAL IPL DEVICE AS HE WOULD ANY OTHER STAND-ALONE PROGRAM.
THEN HE SHOULD INDICATE WHERE THE DDR PROGRAM IS TO OBTAIN ITS
CONTROL STATEMENTS BY RESPONDNG TO PROMPTING MESSAGES AT THE CONSOLE.

STAND-ALONE DDR
MOUNT THE STAND-ALONE DDR TAPE ON AN AVAILABLE TAPE DRIVE.  WITH
THE SYSTEM BEING DOWN, GO TO OPERATOR FRAME.  CHANGE THE UNIT ADDRESS TO
TAPE DRIVE ADDRESS. THEN PERFORM IPL.  WITH THE SYSTEM
BEING DOWN, YOU USE THE READ ADDRESS OF THE PACK. ENTER THE OPTION
SYSPRINT 020 OR SYSPRINT CONSOLE WHILE IN THE DDR PROGRAM TO
PREVENT PRINTER INTERVENTION.
**NOTE** WHEN STANDALONE (SYSTEM DOWN) YOU MUST USE THE SYSPRINT OPTION



RESTORE EXAMPLE

ENTER>SYSPRINT 020
ENTER>INPUT 590 3420 (MODE 6250
ENTER>OUTPUT B4C 3350
ENTER>RESTORE 0 554
DMKDDR711R VOLID READ IS F40107
DO YOU WISH TO CONTINUE?
RESPOND YES, NO OR REREAD:>YES
ENTER NEXT EXTENT OR NULL LINE
ENTER>(CR)
RESTORING F40107

DUMP EXAMPLE

ENTER>INPUT B4C 3350
ENTER>OUTPUT 588 3420 (MODE 6250
ENTER>DUMP ALL
DMKDDR711R VOLID READ IS F40107
DO YOU WISH TO CONTINUE?
RESPOND YES, NO OR REREAD:>YES
ENTER NEXT EXTENT OR NULL LINE
ENTER>(CR)
DUMPING F40107

   AFTER FIRST TAPE IS COMPLETED, YOU WILL RECEIVE A
   MESSAGE TO MOUNT THE NEXT TAPE.. CONTINUE DUMP
   UNTIL YOU RECEIVE END OF JOB MESSAGE.

COPY EXAMPLE

ATT 302 OPER370 302
DASD 302 ATTACH TO OPER370
R;

>DDR
ENTER:>INPUT 300 3350 F40S07
ENTER:>OUTPUT 302 3350 SCRTCH
ENTER:>COPY
ENTER CYLINDER EXTENTS
ENTER:>0 554 CONT
ENTER NEXT EXTENT OR NULL LINE
ENTER:> (CR)
COPYING F40S07

AFTER THE COPY YOU WILL NEED TO LABEL THE
SCRATCH PACK AS F40S07 IN THIS EXAMPLE. USE THE CLIP PROGRAM TO
INTERNALLY LABEL THE NEW PACK. ATTACH THE SCRATCH PACK AS YOUR
350, IF YOU ALREADY HAVE A 350, DETACH IT. IT MUST BE ATTACHED AS
YOUR 350. 

>ATT 302 OPER370 350
DASD 302 ATTACH TO OPER370 350
R;
>CLIP
LABEL ON 350 IS SCRTCH,ENTER NEW LABEL OR NULL
>F40S07
LABEL ON 350 IS NOW F40S07
R;


EXEC.DMP

EXEC.DMP IS AN EXEC PROGRAM WHICH USES THE IBM DDR UTILITY TO DUMP
SYSTEM PACKS TO TAPE FOR FILE BACKUP PURPOSES.  THIS PROGRAM WILL BE
RUN WEEKLY BEGINNING SATURDAY MORNING, UNLESS OTHERWISE DIRECTED BY
THE SHIFT SUPERVISOR OR IS NOTED IN SPECIAL EVENTS.
EXEC.DMP IS QUITE FLEXIBLE AND HAS GOOD ERROR RECOVERY
CAPABILITIES INCLUDING ORDERLY RESTART AFTER ABNORMAL TERMINATION
(I.E.,... SYSTEM CRASH).  THE NEED TO UPDATE THE UTILITY WHEN A
NEW SYSTEM PACK IS NEEDED IS NOT NECESSARY.  THE PROGRAM USES THE SYSTEM
DIRECTORY TO GET INFORMATION ABOUT THE DEVICES TO BE DUMPED AND PICKS
THE NEW PACK  AUTOMATICALLY AS LONG AS IT HAS BEEN ADDED TO THE DIRECTORY
AS A MINIDISK FOR VMSYSCYL AS IS THE CURRENT PRACTICE.

THE PROGRAM REQUIRES 3 TAPES FOR EACH 3350 DISK PACK.

TO EXECUTE THE PROGRAM THE USER ENTERS THE PROGRAM NAME AND THE 
DESIRED DUMP OPTIONS AT THE CMS PROMPT.  THE PROGRAM SCANS THE OPTIONS
FOR VALIDITY AND THEN BEGINS BUILDING A TABLE OF INTERNAL PARAMETERS
TO CONTROL THE JOB.  ONCE THE PARAMETER HAVE BEEN SET UP, THE PROGRAM
WILL ASK FOR THE ADDRESS OF A 6250 BPI TAPE DRIVE IF ONE IS NOT ALREADY
ATTACHED AS ADDRESS 181.  AFTER SUCCESSFULLY GETTING A TAPE DRIVE,
THE PROGRAM WILL ASK THE USER TO MOUNT THE FIRST TAPE TO BEGIN
THE DUMP.  IF THE TAPE IS NOT MOUNTED AND MADE READY WITHIN 5 MINUTES
THE PROGRAM WILL SEND A MESSAGE TO THE SYSTEM OPERATOR ASKING FOR THE TAPE
TO BE MOUNTED.  THE REQUEST WILL BE REPEATED EVERY 5 MINUTES UNTIL
THE TAPE IS MOUNTED.

PROVIDING NO I/O ERRORS OCCUR THE PROGRAM WILL ASK FOR EACH TAPE AS NEEDED
UNTIL THE DUMP IS COMPLETED.  IF AN I/O ERROR DOES OCCUR,  THE PROGRAM
ASKS IF THE USER WISHES TO BYPASS THE WHOLE PACK.  THIS SHOULD
NOT BE DONE UNLESS IT IS IMPOSSIBLE TO DUMP THE PACK.  IF THE USER ELECTS
NOT TO BYPASS THE PACK, HE IS OFFERED THE OPTION OF RETRYING, OR BYPASSING
THE BAD CYLINDER.  IF THE USER DECIDES TO BYPASS A CYLINDER OR CYLINDERS,
THE PROGRAM ASKS THE USER TO INPUT THE CYLINDERS TO BE BYPASSED
(IN DECIMAL) AND THEN BEGINS DUMPING AFTER CALCULATING EXTENTS
TO ALLOW IT TO BYPASS THE SPECIFIED CYLINDERS.  THIS WILL
REQUIRE THE OPERATOR TO CONVERT THE HEX ADDRESS THAT FAILED TO DECIMAL.

AFTER THE PACKS HAVE BEEN DUMPED, A LISTING OF MINIDISKS AND 
ADDRESSES WILL BE PRINTED BY ONE OF THE ID'S RUNNING THE PROGRAM.
SINCE MOST SYSTEMS HAVE MANY PACKS TO BE DUMPED, THE OPTIONS
ARE DESIGNED TO ALLOW THE USER TO SPLIT THE DUMP AMONG 2,3 OR 4
USERIDS.

PROCEDURES

THE PROGRAM CAN BE INITIATED BY USING ANY OF THE OPTIONS LISTED
BELOW.

  EXEC.DMP ALL
           ODD
           EVEN
           3350
           ALL  3350
           ODD 3350
           EVEN 3350
           LISTDIR
           OLD.DIR
           RESTART
           SYSRES
           HELP

ALL        THIS OPTION DUMPS ALL SYSTEM PACKS FROM ONE USERID. THIS
           OPTION TAKES A LONG TIME AND, THEREFORE, ASKS THE
           USER TO VERIFY THAT HE TRULY WANTS TO USE ONLY ONE ID.
           IT WILL PRODUCE A DIRECTORY LISTING.

ODD        THIS OPTION ONLY DUMPS ODD SYSTEM PACKS.  IT WILL DUMP ALL
           PACKS THAT HAVE AN AN ODD DIGIT IN THE LAST POSITION OF THE
           VOLID.  IT WILL ALSO PROVIDE A DIRECTORY LISTING AT THE END
           OF THE JOB.

EVEN       THIS OPTION WILL DUMP ALL PACKS WITH AN EVEN DIGIT AS THE LAST
           POSITION OF THE VOLID.  IT WILL NOT PRODUCE
           THE DIRECTRY LISTING.  THIS OPTION IS USUALLY USED WITH
           ANOTHER USERID RUNNING THE ODD OPTION TO SPLIT THE DUMP TWO WAYS.

3350       THIS OPTION WILL DUMP ALL SYSTEM PACKS (ODD OR EVEN) THAT ARE OF
           A 3350 DEVICE TYPE.  IT IS THE SAME AS USING THE
           'ALL 3350' OPTION.  THE 3350 OPTIONS WILL NOT PRODUCE A 
           DIRECTORY LISTING.

ODD 3350 AND EVEN 3350
           THESE OPTIONS ACT LIKE THE ODD AND EVEN OPTIONS, BUT ONLY
           DUMP PACKS OF THE APPROPRIATE DEVICE TYPE.


LISTDIR    THIS OPTION IS PROVIDED IN CASE THE USER ONLY DESIRES A
           LISTING OF USERS MINIDISKS AND THEIR SIZE AND LOCATION.
           IT ONLY PRODUCES THE LISTING NORMALLY PRINTED
           AND THE END OF A DUMP.

OLD-DIR    THIS OPTION WILL RESTORE THE DIRECTORY INFORMATION FROM
           TAPE TO TEMPDISK AND THE CREATE THE LISTING PRODUCED AFTER A
           DUMP.  IT IS USEFUL IF YOU HAVE TO RESTORE FROM AN OLD
           SET OF TAPES AND THE DIRECTORY FOR THAT SET IS LOST OR
           UNREADABLE.

RESTART    THIS OPTION WILL RESUME AN ABNORMALLY TERMINATED JOB USING
           THE OPTIONS IN EFFECT FOR THAT JOB AND BEGINNING ON
           THE TAPE THAT WAS BEING WRITTEN AT THE TIME OF TERMINATION.

SYSRES     THIS OPTION ONLY DUMPS THE AREAS ON THE SYSTEM RESIDENCE
           PACK, WHICH ARE ALLOCATED AS PERMANENT.  IT ALSO PRINTS THE
           DIRECTORY LISTING.

HELP       THIS WILL PRINT A VERY BRIEF OUTLINE OF THE OPTIONS AVAILABLE.


------------------------


DUMPING SYSRES AND SPL PACKS

THE SYSRES AND SPL (SPOOL) PACKS ARE TO BE DUMPED ON A NIGHTLY BASIS
ON THE VM SYSTEM(S).  THE PURPOSE OF DUMPING THESE PACKS
IS TO ENSURE A DATA BACKUP OF THESE PACKS IN THE EVENT THE CURRENT
PACKS BECOME DAMAGED.

THE EXEC PROGRAM USED TO BACKUP THESE PACKS IS EXEC.DMP.

THE USERID IS SUPPORT.

EXAMPLE RUN

40>EXEC.DMP SYSRES


EXEC.DMP EXEC VERSION 2.6

SETUP IN PROCESS

2 PACKS TO BE DUMPED

DMKCQG040E DEVE 181 DOES NOT EXIST

ENTER ADDRESS (CUU) OF 6250 BPT TAPE DRIVE TO BE USED.

>592
TAPE 592 ATTACH TO SUPPORT 181

SETUP COMPLETE

MOUNT F40RES TAPE ON 592

DUMPING F40RES
END OF DUMP
END OF JOB

MOUNT F40SPL TAPE 1 OF 2 ON 592

DUMPING F30SPL
END OF DUMP
END OF JOB

SETUP FOR CREATION OF DIRECTORY FILE IN PROCESS

DASD 196 DEFINED
DASD 198 DEFINED

DMSFOR733I FORMATTING DISK 'B'
DMSFOR732I DISK 'B(196)' FORMATTED.

DMSFOR733I FORMATTING DISK 'C'
DMSFOR732I DISK 'C(198)' FORMATTED.

CREATING DIRECTORY FILE

EDIT IN PROCESS

DIRECTORY LISTING HAS BEEN SPOOLED

EXEC.DMP COMPLETE AT 05:58:33 ON 04/19/90

E.O.J.
 